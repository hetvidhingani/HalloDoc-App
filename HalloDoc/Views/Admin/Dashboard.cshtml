@model HalloDoc.Entities.ViewModels.AdminDashboardViewModel
@* model *@
<div class="modal fade" id="CancelCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="AssignCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="BlockCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="ClearCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="TransferCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="SendAgreement" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
@* model end *@
<main class="mainSectionMargin">
    <div class="container-fluid dashboardMain ">
        <div>
           
            <div class="row cardRow g-2 ">
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col ">
                    <button class="cards active-card cardDesign1 " id="New" data-view-name="_NewPartialView">
                        <div class="row">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint" >
                                    NEW  
                                </strong>
                               
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="newCountDisplay"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign2  " id="Pending" data-view-name="_PendingPartialView">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">PENDING</strong>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="pendingCountDisplay"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>

                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign3  " id="Active">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">ACTIVE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="ActiveCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign4  " id="Conclude">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">CONCLUDE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="ConcludeCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign5  " id="ToClose">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">TO CLOSE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="ToCloseCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>

                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign6  " id="Unpaid">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">UNPAID</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint fs-3" id="UnpaidCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>

            </div>
            @* Table container *@
            <div class="row mt-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="sectionHeading">
                        <strong class="tableHead ">
                            <h3 class="">Patients</h3>
                            <h5 style="color:#203e84;font-size:14px" class="">(New)</h5>
                        </strong>
                    </div>
                    <div class="dashboardLinks d-flex flex-row-reverse flex-wrap " style="float:right">
                        <a href="#" class="mainTextLink">
                            <img src="~/images/man-svgrepo-com.png" class="iconLink " style="width:25px;color:white" />
                            Request DTY Support
                        </a>
                        <a href="#" class="mainTextLink">
                            <img src="~/images/export-svgrepo-com.png" class="iconLink " style="width:25px;color:white" />


                            Export All
                        </a>
                        <a href="#" class="mainTextLink">
                            <img src="~/images/export-svgrepo-com.png" class="iconLink " style="width:25px;color:white" />Export
                        </a>
                        <a href="#" class="mainTextLink"><i class="bi bi-file-earmark iconLink"></i>Create Requests</a>
                        <a href="#" class="mainTextLink">
                            <i class="bi bi-send iconLink"></i>

                            Send Link
                        </a>
                    </div>
                </div>

            </div>
            <div class="container-fluid rounded formshadow px-2 py-1 ">
                <div class="row mt-3">
                    <div class="col-12 d-flex justify-content-between flex-wrap align-items-center">
                        <div class="d-flex flex-wrap col-lg-6 col-md-12 col-sm-12 searchDiv">
                            <div class="form-group has-search col-lg-4 col-md-6 col-sm-6">
                                <span class="fa fa-search form-control-feedback"></span>
                                <input type="text" class="form-control " placeholder="Search" id="search-input" oninput="searchFunction()">

                            </div>
                            <div class="has-search col-lg-4 col-md-6 col-sm-6 ">
                                <select class="form-select" aria-label="Default select example">
                                    <option selected>All Regions</option>
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12 d-flex flex-wrap align-items-center formbasetab">
                            <div class=""> <button class="firstType"> All   </button></div>
                            <button class="btn type request-type-btn" data-requesttype="1"><span class="dot1 "></span><span class="sidetabdashboard">Patient</span></button>
                            <button class="btn type"><span class="dot2 "></span><span class="sidetabdashboard">Family/Friend</span></button>
                            <button class="btn type"><span class="dot4 "></span><span class="sidetabdashboard">Concierge</span></button>
                            <button class="btn type"><span class="dot3 "></span><span class="sidetabdashboard">Business</span></button>

                        </div>
                    </div>
            @* table *@
                    <div id="admindata" class="mb-5"></div>

                </div>
            </div>
        </div>
    </div>
</main>
<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "none") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        });
    }
    function searchFunction() {
        var inputVal = document.getElementById("search-input").value.toLowerCase();

        var rows = document.getElementById("patientTable").rows;
        for (var i = 1; i < rows.length; i++) {
            var patientName = rows[i].cells[0].innerText.toLowerCase();

            if (patientName.indexOf(inputVal) == -1) {
                rows[i].style.display = "none";
            } else {
                rows[i].style.display = "";
            }
        }
    }
 
        $(document).ready(function () {
        $("#New").addClass("active");

            load();


        $('#New').click(function () {
            $(this).addClass("active").siblings().removeClass("active");
          
            $('#Pending, #Active, #Conclude, #ToClose, #Unpaid').removeClass("active");

            $.ajax({
                url: "/Admin/New",
                type: "POST",
                dataType: "html",
                success: function (data) {
                    $("#admindata").html(data);
                },
                error: function () {
                    alert("No Projects Found");
                    $("#admindata").html('An error has occurred');
                }
            });
        });

        $('#Pending').click(function () {
            $(this).addClass("active").siblings().removeClass("active");
           
            $('#New, #Active, #Conclude, #ToClose, #Unpaid').removeClass("active");

            $.ajax({
                    url: "/Admin/Pending",
                    type: "POST",
                    dataType: "html",
                    success: function (data) {
                        $("#admindata").html(data);
                   

                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#admindata").html('An error has occurred');
                    }
                });
            });

            $('#Active').click(function () {
            $(this).addClass("active").siblings().removeClass("active");
            
            $('#New, #Pending, #Conclude, #ToClose, #Unpaid').removeClass("active");

            $.ajax({
                    url: "/Admin/Active",
                    type: "POST",
                    dataType: "html",
                    success: function (data) {
                        $("#admindata").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#admindata").html('An error has occurred');
                    }
                });
            });

            $('#Conclude').click(function () {
            $(this).addClass("active").siblings().removeClass("active");

            $('#New, #Pending, #Active, #ToClose, #Unpaid').removeClass("active");

            $.ajax({
                    url: "/Admin/Conclude",
                    type: "POST",
                    dataType: "html",
                    success: function (data) {
                        $("#admindata").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#admindata").html('An error has occurred');
                    }
                });
            });


            $('#ToClose').click(function () {
            $(this).addClass("active").siblings().removeClass("active");

            $('#New, #Pending, #Active, #Conclude, #Unpaid').removeClass("active");

            $.ajax({
                    url: "/Admin/ToClose",
                    type: "POST",
                    dataType: "html",
                    success: function (data) {
                        $("#admindata").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#admindata").html('An error has occurred');
                    }
                });
            });

            $('#Unpaid').click(function () {
            $(this).addClass("active").siblings().removeClass("active");

            $('#New, #Pending, #Active, #Conclude, #ToClose').removeClass("active");

            $.ajax({
                    url: "/Admin/Unpaid",
                    type: "POST",
                    dataType: "html",
                    success: function (data) {
                        $("#admindata").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#admindata").html('An error has occurred');
                    }
                });
            });
        });

    function load() {
        $.ajax({
            url: "/Admin/New",
            type: "POST",
            dataType: "html",
            success: function (data) {
                $("#admindata").html(data);
            },
            error: function () {
                alert("No Projects Found");
                $("#admindata").html('An error has occurred');
            }
        });
      
    }
    document.getElementById("newCountDisplay").innerText = @Model.NewCount;
    document.getElementById("pendingCountDisplay").innerText = @Model.PendingCount;
    document.getElementById("ActiveCount").innerText = @Model.ActiveCount;
    document.getElementById("ConcludeCount").innerText = @Model.ConcludeCount;
    document.getElementById("ToCloseCount").innerText = @Model.ToCloseCount;
    document.getElementById("UnpaidCount").innerText = @Model.UnpaidCount;


</script>