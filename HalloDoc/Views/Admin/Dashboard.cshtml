@model HalloDoc.Entities.ViewModels.AdminDashboardViewModel
@* model *@
<div class="modal fade" id="CancelCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="AssignCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="BlockCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="ClearCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="TransferCase" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
<div class="modal fade" id="SendAgreement" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">

        <div class="modal-content">
        </div>
    </div>
</div>
@* model end *@
<main class="mainSectionMargin">
    <div class="container-fluid dashboardMain ">
        <div>
            <div class="row cardRow g-2 ">
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col ">
                    <button class="cards active cardDesign1 " id="New" data-view-name="_NewPartialView" onclick="loadTable('New')">
                        <div class="row">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint " >
                                    NEW  
                                </strong>
                               
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font " id="newCountDisplay"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign2  " id="Pending" data-view-name="_PendingPartialView" onclick="loadTable('Pending')">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">PENDING</strong>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font" id="pendingCountDisplay"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>

                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col" >
                    <button class="cards cardDesign3  " id="Active" onclick="loadTable('Active')">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">ACTIVE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font" id="ActiveCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign4  " id="Conclude" onclick="loadTable('Conclude')">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">CONCLUDE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font" id="ConcludeCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign5  " id="ToClose" onclick="loadTable('Toclose')">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">TO CLOSE</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font" id="ToCloseCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>

                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 cust-col">
                    <button class="cards cardDesign6  " id="Unpaid" onclick="loadTable('Unpaid')">
                        <div class="row ">
                            <div class="col-12">
                                <i class="bi bi-plus-circle i"></i>
                                <strong class="cardContaint">UNPAID</strong>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <strong class="cardContaint font" id="UnpaidCount"></strong>

                            </div>
                        </div>
                    </button>
                    <div class="triangle mx-auto"></div>


                </div>

            </div>
            @* Table container *@
            <div class="row mt-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="sectionHeading">
                        <strong class="tableHead ">
                            <div class="headerfontDash">Patients</div>
                            <div style="color:#203e84;font-size:9px" id="status"></div>
                        </strong>
                    </div>
                    <div class="dashboardLinks d-flex  flex-wrap " style="float:right">
                        <button class="btn btn-info ">
                            <i class="bi bi-send iconLink"></i>
                            <span class="tabIcon">
                                Send Link

                            </span>
                        </button>
                        <button class="btn btn-info ">
                            <i class="bi bi-file-earmark "></i>
                            <span class="tabIcon"> Create Requests</span>
                        </button>
                        <button class="btn btn-info ">
                            <img src="~/images/export-svgrepo-com.png" class=" " style="width:22px;color:white" /><span class="tabIcon">Export</span>
                        </button>
                        <button class="btn btn-info ">
                            <img src="~/images/export-svgrepo-com.png" class=" " style="width:22px;color:white" />

                            <span class="tabIcon">
                                Export All

                            </span>
                        </button>

                        <button class="btn  btn-info " >
                            <img src="~/images/man-svgrepo-com.png"  style="width:22px;color:white" />
                            <span class="tabIcon">Request DTY Support</span>
                        </button>
                       
                      
                        
                    </div>
                </div>

            </div>
            <div class="container-fluid rounded formshadow px-2 py-1 ">
                <div class="row mt-2">
                    <div class="col-12 d-flex justify-content-between flex-wrap align-items-center">
                        <div class="d-flex flex-wrap col-lg-5 col-md-3 col-sm-12 searchDiv">
                            <div class="form-group has-search col-lg-5 col-md-6 col-sm-6" >
                                <span class="fa fa-search form-control-feedback"></span>
                                <input type="text" class="form-control w-100" placeholder="Search" id="search-input" oninput="searchFunction()">

                            </div>
                            <div class="has-search col-lg-5 col-md-6 col-sm-6 ">
                                <select class="form-select form-select-sm w-100 h-100" aria-label="Default select example" aria-height="5vh" asp-for="RegionId" >
                                    <option value="0" selected>All Regions</option>
                                    
                                    @foreach (var region in Model.State)
                                    {
                                        <option value="@region.RegionId">@region.Name</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-12 col-md-9 d-flex flex-wrap align-items-center formbasetab">
                            <div class=""> <button class="firstType"> All   </button></div>
                            <button class="btn type request-type-btn" data-requesttype="1"><span class="dot1 "></span><span class="sidetabdashboard">Patient</span></button>
                            <button class="btn type"><span class="dot2 "></span><span class="sidetabdashboard">Family/Friend</span></button>
                            <button class="btn type"><span class="dot4 "></span><span class="sidetabdashboard">Concierge</span></button>
                            <button class="btn type"><span class="dot3 "></span><span class="sidetabdashboard">Business</span></button>

                        </div>
                    </div>
            @* table *@
                    <div id="admindata" class="mb-5"></div>
                    
                </div>
            </div>
        </div>
    </div>
</main>
<script>
    //request type search
    var state = "1"; // Variable to store the selected state
    var requesttype = 0;
    $(document).ready(function () {
        // Event handler for state buttons
        filterData(state, requesttype);
        $(".btn-state").click(function () {
            state = $(this).data("state");
            filterData(state, requesttype);
        });

        // Event handler for request type buttons
        $(".request-type-btn").click(function () {
            var requesttype = $(this).data("requesttype");
            filterData(state, requesttype);
        });
    });

    //cards design
    $(document).ready(function () {
        $(".cards").click(function () {
           
            $(".cards").removeClass("active");

          
            $(this).addClass("active");
        });
    });

     //partialview  
    $(document).ready(function () {
        loadTable('New');
    });
    function loadTable(state) {
        document.getElementById('status').innerText ="( "+ state +" )";
        $.ajax({
            url:'/Admin/GetTable',
            method:'GET',
            data: {state:state},
            success: function (data) {
                $("#admindata").html(data);
             

            },
            error: function (xhr, status, error) {
                console.log('AJAX error:', error);
            }
        })
    }


    //responsive mobile view
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "none") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        });
    }

    //search box
    function searchFunction() {
        var inputVal = document.getElementById("search-input").value.toLowerCase();

        var rows = document.getElementById("patientTable").rows;
        for (var i = 1; i < rows.length; i++) {
            var patientName = rows[i].cells[0].innerText.toLowerCase();

            if (patientName.indexOf(inputVal) == -1) {
                rows[i].style.display = "none";
            } else {
                rows[i].style.display = "";
            }
        }
    }
 
   //display count   
    document.getElementById("newCountDisplay").innerText = @Model.NewCount;
    document.getElementById("pendingCountDisplay").innerText = @Model.PendingCount;
    document.getElementById("ActiveCount").innerText = @Model.ActiveCount;
    document.getElementById("ConcludeCount").innerText = @Model.ConcludeCount;
    document.getElementById("ToCloseCount").innerText = @Model.ToCloseCount;
    document.getElementById("UnpaidCount").innerText = @Model.UnpaidCount;


</script>