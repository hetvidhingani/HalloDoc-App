@using HalloDoc.Entities.DataModels;
@using Microsoft.AspNetCore.Identity;
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor HttpContextAccessor
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - HalloDoc</title>




    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/style.css" asp-append-version="true" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    @* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> *@
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/HalloDoc.styles.css" asp-append-version="true" />
    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" 
    integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>


    @if (@HttpContextAccessor?.HttpContext?.Session.GetString("UserSession") != null || @HttpContextAccessor?.HttpContext?.Session.GetString("AdminSession") != null)
    {
        <div class="header2 bg-white shadow d-flex align-content-center" id="">

           <div class="d-flex align-items-center">
                <a href="javascript:void(0);" class="topicon" onclick="myFunction1()">
                    <button class="btn mt-2 p-1" style="border:2px solid #00bbe8">
                        <i class="bi bi-list"></i>
                    </button>
                </a>

                <a asp-action="Dashboard"  class="Logo">
                    <img src="~/images/loginpagelogo.png" class="MainHeaderLogolayout " alt="">
                </a>
           </div>

            <div class="d-flex " style="margin-left:auto">
                <div class="d-flex righttabs align-items-center">

                    <div class=" d-flex mx-3 ">
                        <span id="usernamedashboard">
                            <h5>
                                Welcome,
                                <strong>
                                    @HttpContextAccessor?.HttpContext?.Session.GetString("UserName")
                                </strong>
                            </h5>
                        </span>

                    </div>
                    @if (@HttpContextAccessor?.HttpContext?.Session.GetString("UserSession") != null)
                    {
                        <a asp-controller="Patient" asp-action="Logout">
                            <button class="mx-3 logout" type="submit">
                                <span class="logouttxt"> Logout</span>
                                <span class="logoutIcon"><i class="bi bi-box-arrow-right"></i></span>
                            </button>

                        </a>
                    }
                    else
                    {
                        <a asp-controller="Admin" asp-action="Logout">
                            <button class="mx-3 logout" type="submit">
                                <span class="logouttxt"> Logout</span>
                                <span class="logoutIcon"><i class="bi bi-box-arrow-right"></i></span>
                            </button>

                        </a>
                    }

                  
                    <div  class="moon-icon" style="d-flex justify-content-center align-items-center">
                        <img src="~/images/moon_icon.svg" alt="moon_icon" onclick="changeTheme()" />
                    </div>
                </div>

            </div>

        </div>
        @if (@HttpContextAccessor?.HttpContext?.Session.GetString("UserSession") != null)
        {
            <div class="col-12 bg-white subHeader shadow" style="z-index:1000">
                <div class="topnav" id="myTopnav">
                    <strong>
                        <a asp-action="Dashboard" asp-controller="Patient" class="py-2" style="color:#01BCE9">Dashboard</a>
                        <a asp-action="Profile" asp-controller="Patient" class="py-2" style="color:#01BCE9">Profile</a>
                    </strong>
                </div>

            </div>
        }
        else
        {
            <div class="col-12 bg-white subHeader shadow" style="z-index:1000">
                <div class="topnav" id="myTopnav">
                    <span>
                        <a id="1" asp-action="Dashboard" asp-controller="Admin" class="nav-link py-2 active" style="color:dimgrey">Dashboard</a>
                        <a id="2" asp-action="Dashboard" asp-controller="Admin" class="nav-link py-2" style="color:dimgrey">Provider Location</a>

                        <a  id="3" asp-action="AdminMyProfile" asp-controller="Admin" class="nav-link py-2" style="color:dimgrey">My Profile</a>
                        <div class="dropdown " id="4 " >
                            <a class="nav-link py-2" href="#" role="button" data-bs-toggle="dropdown" style="color:dimgrey" aria-expanded="false">
                                Providers
                            </a>

                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" style="color:dimgrey" asp-action="ProviderInformation" asp-controller="Admin">Provider</a></li>
                                <li><a class="dropdown-item" style="color:dimgrey" href="#">Scheduling</a></li>
                                <li><a class="dropdown-item" style="color:dimgrey" href="#">Invocing</a></li>
                            </ul>
                        </div>
                        <a id="5" asp-action="AdminMyProfile" asp-controller="Admin" class="nav-link py-2" style="color:dimgrey">Partners</a>
                        <a  id="7" asp-action="AccountAccess" asp-controller="Admin" class="nav-link py-2" style="color:dimgrey">Access</a>
                        <a id="6" asp-action="AdminMyProfile" asp-controller="Admin" class="nav-link py-2" style="color:dimgrey">Records</a>

                    </span>
                </div>

            </div>
          
        }

    }
    else
    {
        <header class="header bg-white d-flex align-content-center ">

            <a asp-action="PatientSite" class="Logo">
                <img src="~/images/loginpagelogo.png" class="headerLogo" alt="">
            </a>

            <div class="switch-mode-inner-div">
                <img src="~/images/moon_icon.svg" alt="moon_icon" onclick="changeTheme()" />
            </div>

        </header>
    }



    @RenderBody()

    <footer style="position:fixed;bottom: 0;height: 40px;background-color: black; width: 100%;z-index:3000 ;padding:5px">
        <div class="d-flex justify-content-end align-items-center footlink">
            <a href="#" style="color:white">Terms and Conditions  </a> |
            <a href="#" style="color:white;">Privacy Policy</a>

        </div>
    </footer>

    <script>
        $(document).ready(function () {
            // Check if there's a saved state in local storage
            var activeLink = localStorage.getItem("activeLink");
            if (activeLink) {
                // Remove active class from all links and then add it to the saved active link
                $(".nav-link").removeClass("active");
                $("#" + activeLink).addClass("active");
            }

            // Handle click events for dashboard links
            $(".nav-link").click(function (event) {
                // Prevent default behavior of the link
                event.preventDefault();

                // Remove active class from all links
                $(".nav-link").removeClass("active");
                // Add active class to the clicked link
                $(this).addClass("active");

                // Save the id of the clicked link to local storage
                localStorage.setItem("activeLink", $(this).attr("id"));

                // Now navigate to the desired place
                window.location.href = $(this).attr("href");
            });
        });



        function myFunction1() {
            var x = document.getElementById("myTopnav");
            if (x.className === "topnav") {
                x.className += " responsive";
            } else {
                x.className = "topnav";
            }
        }
            $(document).ready(function () {
           

                $(".nav-link").click(function () {
                   
                
                    $(".nav-link").removeClass("tabactive");

                   
                    $(this).addClass("tabactive");
                });
            });

    </script>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/custom.js" asp-append-version="true"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>

        $(document).ready(function () {
            var theme = getCookie("theme");
            if (theme == "dark") {
                $("body").addClass("darkMode");
                $(".mainSection").addClass("darkMode");
                $(".header2").addClass("bg-dark");
                $(".header2").removeClass("bg-white");

                $(".header").addClass("bg-dark");
                $(".header").removeClass("bg-white");
                $(".subHeader").addClass("bg-dark");
                $(".subHeader").removeClass("bg-white");
                $(".table").addClass("table-dark");

                $(".mobileviewdashboard").addClass("darkMode");
            }
            else {
                $("body").removeClass("darkMode");
                $(".mainSection").removeClass("darkMode");
                $(".header2").removeClass("bg-dark");
                $(".header2").addClass("bg-white");
                $(".header").removeClass("bg-dark");
                $(".header").addClass("bg-white");
                $(".header").removeClass("bg-dark");
                $(".subHeader").addClass("bg-white");
                $(".subHeader").removeClass("bg-dark");
                $(".table").removeClass("table-dark");


                $(".mobileviewdashboard").removeClass("darkMode");

            }
        });

        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) return parts.pop().split(";").shift();
        }

    </script>


    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>

